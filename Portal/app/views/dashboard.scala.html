@(title:String, recentLogItems:List[com.richardchankiyin.log.LogItem], user:String, loginTime:String)

<html>
<title>@title</title>
<script type="text/javascript">
var wsUri = "ws://localhost:9000/broadcast"
var websocket = new WebSocket(wsUri);

function date_time(id)
{
        date = new Date;
        year = date.getFullYear();
        month = date.getMonth();
        months = new Array('01', '02', '03', '04', '05', '06', '07', '08', '09', '10', '11', '12');
        d = date.getDate();
        day = date.getDay();
        days = new Array('Sunday', 'Monday', 'Tuesday', 'Wednesday', 'Thursday', 'Friday', 'Saturday');
        h = date.getHours();
        if(h<10)
        {
                h = "0"+h;
        }
        m = date.getMinutes();
        if(m<10)
        {
                m = "0"+m;
        }
        s = date.getSeconds();
        if(s<10)
        {
                s = "0"+s;
        }
        //result = ''+days[day]+' '+months[month]+' '+d+' '+year+' '+h+':'+m+':'+s;
        result = year + '-' + months[month] + '-' + d + ' ' + h+':'+m+':'+s;
        document.getElementById(id).innerHTML = result;
        setTimeout('date_time("'+id+'");','1000');
        return true;
}

function initWebSocket() {
	
	websocket.onopen = function(evt) { onOpen(evt) };
    websocket.onclose = function(evt) { onClose(evt) };
    websocket.onmessage = function(evt) { onMessage(evt) };
    websocket.onerror = function(evt) { onError(evt) };

    alert("init websocket")
    doSend("connecting....");
}

function onOpen(evt)
{
  document.getElementById("websocket_console").innerHTML += "connected!\n";
}

function onClose(evt)
{
  document.getElementById("websocket_console").innerHTML += "disconnected!\n";
}

function onMessage(evt) {
  document.getElementById("websocket_console").innerHTML += "result:" + evt.data;
}

function onMessage(evt) {
  document.getElementById("websocket_console").innerHTML += "error:" + evt.data;
}

function doSend(message)
{
  websocket.send(message);
  document.getElementById("websocket_console").innerHTML += "sent:" + evt.data;
}
</script>
<body onload="date_time('currenttime');initWebSocket();">
<h1>@title</h1>
<table id="summary">
	<tr>
		<td>Login as @user</td>
		<td>Login Time:</td>
		<td>@loginTime</td>
	</tr>
	<tr>
		<td><a href="logout">Logout</a></td>
		<td>Current Time:</td>
		<td><div id="currenttime"></div></td>
	</tr>

</table>

<div id="logsummary">Last @(recentLogItems.size) log(s) are being shown:</div>

<table id="logtable">
<tr>
<td>Time</td>
<td>Schedule</td>
<td>Job Desc</td>
<td>Remarks</td>
<td>Status</td>
</tr>
@for(item <- recentLogItems) {
	<tr>
    <td>@(item.getTime)</td>
    <td>@(item.getSchedule)</td>
    <td>@(item.getJobDesc)</td>
    <td>@(item.getRemarks)</td>
    <td>
    	@if(item.isLogSuccess) {
    		&#10004;
    	} else {
    		&#10006;
    	}
    </td>
    </tr>
}
</table>

<div id="websocket_console">

</div>
</body>


</html>